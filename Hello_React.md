# 初めに
ReactみたいなフロントエンドFWって難しいよね。  
とくにメタ的な部分が。  

Nodeが必要だったり、複数のパッケージマネージャー、プロジェクト作成用ツール、謎のディレクトリたち（node_modules, package.json, yarn.lock)などなど

ただでさえたくさん要素がうえに各種ツールの栄枯盛衰もあるので、混乱しがち。

# なぜフロントエンドの開発でバックエンド用のNodeが必要なのか
- パフォーマンス最適化のためにJavaScriptやCSSファイルを少数のファイルにまとめる（＝バンドル）
- 新しいバージョンのJavaScriptやAltJSのコードを古いバージョンのJavaScriptコンパイルして、古いブラウザでも動作可能にする
- 開発環境においてブラウザにローカルファイルを直接読み込ませるのではなく、ローカルに開発用のアプリケーションサーバを稼働させることで、動作を検証しやすくし開発の効率を高める
- テストツールを用いてユニットテストやE2Eテストを記述・実行する
- ソースコードの静的解析や自動生計を行う

# nodeコマンドの使い方
コマンドラインで`python`コマンドを実行するとREPLが実行できるように、`node`と実行することでREPLが起動できる。  
このREPLが割りと高性能らしく、REPL内で複数のコマンドを使用できたり、コマンド保管してくれたりする。  

コマンドの一覧は`.help`で確認可能。  
`.load`コマンドが便利で、ファイルを指定することで簡単に指定したファイル内の関数・メソッドなどが呼び出せる。
```
> .load ファイル名
```

# viteでプロジェクトを作成する
## vite（ヴィート）とは
`vite`は、`Vue.js`の開発者（Evan You氏）によって作られたビルドツール。  

`Vue.js`だけでなく`React`のビルドもサポートしている。

## viteがやってくれること
Reactでそれなりの規模のアプリケーションを作成する場合には、いろんな機能が必要で、
- 最新仕様のJS
- JSXを古いブラウザでも実行可能に変換するためのコンパイラ
- JS及びCSSをひとつにまとめminifyするためのバンドラ

などなど  
またこれらを導入した上で、それらが連携して動作するように複雑な設定を行う必要がある。

そのため、Reactのアプリケーションプロジェクトを作成・運用するためのツールが公式やサードパーティから提供されている。  
その一つが`vite`。 

他にも
- Webpack
- create-react-app
- esbuild

などが存在する

# viteでプロジェクトを作成する
コマンドラインで以下のコマンドを作成することで、Reactのプロジェクトを作成できる
```
$ yarn create vite hello-world --template=react-ts
```
ここではプロジェクトのテンプレートとして`react-ts`を指定することで、
`React`と`TypeScript`を利用するプロジェクトが作成される。 

コマンドが正しく完了すると`hello-world`というディレクトリ名のプロジェクトが作成される。  


# プロジェクト作成後の謎のディレクトリたち
フロントエンドのプロジェクトには、メインロジックやUIとは別のディレクトリやファイルがたくさん登場する。  

例えば以下のようなプロジェクトの場合は、`src`がメインロジックやUIが入る。  
他のディレクトリたちは何のためのものなのか。  
- hello-world/
  - index.html
  - node_modules
  - package.json
  - public
  - src
  - tsconfig.json
  - tsconfig.node.json
  - vite.config.ts
  - yarn.lock

これらは一体なんのためのものなのかを確認していく。  

## node_modules
`node_modules`はプロジェクト内で使用されるパッケージの実行ファイルが置かれるディレクトリである。  


<br>

フロントエンドのプロジェクトを初めて動かす前に、プロジェクトルートで以下のようなコマンドを実行したことがある人も多いのではないだろうか。  
```
npm install
```
```
yarn
```
```
yarn install
```

これらのコマンドは、`package.json`に記述されている依存パッケージを`node_modules`配下にインストールして、  
インストールされたパッケージのバージョン情報を、その依存関係も含めて`package-lock.json`や`yarn.lock`というファイルに出力するというもの。  

そのため実際にフロントエンドのプロジェクトを実行する前には必須のコマンドとなる。  

パッケージマネージャに`npm`をしている場合は`npm install`だし、`yarn`を使用している場合は`yarn`もしくは`yarn install`を実行する。  
ここの`yarn`コマンドは略式表記で、正確には`yarn install`を実行している。  

## package-lock.jsonとyarn.lock
`package-lock`や`yarn.lock`は、`node_modules`にインストールしたパッケージの依存情報を保存しておくためのファイル。

<br>


`node_module`内を確認してもらうとわかる通り、すごい数のディレクトリができているはず。  
前述した通り、これらはプロジェクトで使用するためのパッケージの実行ファイルが格納されており、それらのパッケージは相互に特定のバージョンに依存している。  

そのためちょっとバージョンを変更しただけでアプリケーションが動かなくなる場合がある。  

だからいつ誰がインストールしてもすべてのパッケージで完全に同じバージョンがインストールされるよう、インストールしたパッケージの依存情報を保存しておくためのファイルが`package-lock.json`や`yarn.lock`ファイルである。  

<br>

そのため、Gitリポジトリに`node_modules`は含めないが、`package-lock.json`や`yarn.lock`は必ず入れておくようにする。



## package.json
`package.json`には、プロジェクト内で必要とするパッケージの一覧が記述されている。  
